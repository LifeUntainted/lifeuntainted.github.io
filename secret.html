<!DOCTYPE html>
<html>
<head>
  <title>Niche Builder</title>
  <style>
    body {
      background-color: #f0f0f0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    #game-container {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }

    #game-container h1 {
      margin-top: 20px;
    }

    #business-visual {
      margin-top: 20px;
      padding: 20px;
      min-height: 100px;
      transition: all 0.5s ease;
    }

    #options-area button {
      margin: 10px;
      padding: 12px 20px;
      position: relative;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #options-area button:hover {
      background-color: #45a049;
    }

    #options-area button .tooltip {
      visibility: hidden;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 8px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -75px;
      width: 150px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    #options-area button:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }

    #results-area, #news-area {
      margin-top: 20px;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
    }

    #news-area {
      font-style: italic;
    }

    .progress-bar {
      width: 80%;
      background-color: #ddd;
      border-radius: 13px;
      margin: 10px auto;
      overflow: hidden;
    }

    .progress-fill {
      height: 20px;
      background-color: #4caf50;
      text-align: right;
      padding-right: 5px;
      color: white;
      line-height: 20px;
      transition: width 0.5s ease;
    }

    /* Responsive Design */
    @media only screen and (max-width: 600px) {
      #options-area button {
        width: 100%;
        margin: 5px 0;
      }

      #options-area button .tooltip {
        left: 50%;
        margin-left: -75px;
        width: 150px;
      }
    }
  </style>
</head>
<body>

<div id="game-container">
  <h1>Niche Builder</h1>

  <div id="tutorial" style="display:none;">
    <h2>Welcome to Niche Builder!</h2>
    <p>In this game, you'll build a business in your chosen niche. Make strategic decisions to increase your revenue and customer satisfaction while managing your capital.</p>
    <p>You'll face market fluctuations, competitor actions, and news events that will impact your business.</p>
    <p>Choose your niche, make smart decisions, and grow your business to $10,000 in revenue!</p>
    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="difficulty-selection">
    <h2>Select Difficulty:</h2>
    <button onclick="selectDifficulty('easy')">Easy</button>
    <button onclick="selectDifficulty('medium')">Medium</button>
    <button onclick="selectDifficulty('hard')">Hard</button>
    <button onclick="showTutorial()">Tutorial</button>
  </div>

  <div id="niche-selection" style="display:none;">
    <h2>Choose Your Niche:</h2>
    <button onclick="selectNiche('tech')">Tech Gadgets</button>
    <button onclick="selectNiche('fashion')">Sustainable Fashion</button>
    <button onclick="selectNiche('food')">Organic Food</button>
  </div>

  <div id="business-visual" style="display:none;">
    <!-- Visual representation will be updated dynamically -->
  </div>

  <div id="options-area" style="display:none;"></div>

  <div id="results-area" style="display:none;">
    <h3>Business Status</h3>
    <div class="progress-bar">
      <div id="revenue-bar" class="progress-fill" style="width:0%;">$0</div>
    </div>
    <div class="progress-bar">
      <div id="satisfaction-bar" class="progress-fill" style="width:0%;">0%</div>
    </div>
    <p id="result-message">Your Results Here</p>
  </div>

  <div id="news-area" style="display:none;">
    <!-- News events will be updated dynamically -->
  </div>
</div>

<script>
  let revenue;
  let customerSatisfaction;
  let capital;
  let niche = "";
  let competitorRevenue;
  let difficulty;
  let marketVolatility;
  let competitorAggression;
  let tutorialMode = false;

  function showTutorial() {
    tutorialMode = true;
    document.getElementById('difficulty-selection').style.display = 'none';
    document.getElementById('tutorial').style.display = 'block';
  }

  function startGame() {
    document.getElementById('tutorial').style.display = 'none';
    document.getElementById('difficulty-selection').style.display = 'block';
  }

  function selectDifficulty(selectedDifficulty) {
    difficulty = selectedDifficulty;
    if (difficulty === 'easy') {
      capital = 7000;
      marketVolatility = 0.8;
      competitorAggression = 0.8;
    } else if (difficulty === 'medium') {
      capital = 5000;
      marketVolatility = 1;
      competitorAggression = 1;
    } else if (difficulty === 'hard') {
      capital = 3000;
      marketVolatility = 1.2;
      competitorAggression = 1.2;
    }
    revenue = 1000;
    customerSatisfaction = 75;
    competitorRevenue = 800;
    document.getElementById('difficulty-selection').style.display = 'none';
    document.getElementById('niche-selection').style.display = 'block';
  }

  function selectNiche(chosenNiche) {
    niche = chosenNiche;
    updateBusinessVisual();
    document.getElementById('niche-selection').style.display = 'none';
    document.getElementById('business-visual').style.display = 'block';
    document.getElementById('options-area').style.display = 'block';
    document.getElementById('results-area').style.display = 'block';
    document.getElementById('news-area').style.display = 'block';
    showOptions();
    updateResults("You have selected the " + niche + " niche.");
    if (tutorialMode) {
      alert("Now, make strategic decisions to grow your business!");
    }
  }

  function updateBusinessVisual() {
    const visualArea = document.getElementById('business-visual');
    visualArea.innerHTML = "";

    if (niche === "tech") {
      visualArea.innerHTML += "<p style='font-size:70px;'>üíª</p><h2>Tech Gadget Company</h2>";
    } else if (niche === "fashion") {
      visualArea.innerHTML += "<p style='font-size:70px;'>üëó</p><h2>Sustainable Fashion Brand</h2>";
    } else if (niche === "food") {
      visualArea.innerHTML += "<p style='font-size:70px;'>üçé</p><h2>Organic Food Store</h2>";
    }
  }

  function showOptions() {
    const optionsArea = document.getElementById('options-area');
    optionsArea.innerHTML = "";

    optionsArea.innerHTML += `
      <button onclick="hireStaff()">
        Hire Staff ($500)
        <span class="tooltip">Increases customer satisfaction by hiring more staff.</span>
      </button>
      <button onclick="upgradeEquipment()">
        Upgrade Equipment ($1000)
        <span class="tooltip">Boosts revenue by improving efficiency.</span>
      </button>
      <button onclick="runAdvertising()">
        Run Advertising Campaign ($800)
        <span class="tooltip">Increases revenue but may impact satisfaction due to demand surge.</span>
      </button>
      <button onclick="researchMarket()">
        Research Market Trends ($300)
        <span class="tooltip">Provides insights into market trends.</span>
      </button>
    `;

    if (niche === "tech") {
      optionsArea.innerHTML += `
        <button onclick="investInResearch()">
          Invest in R&D ($2000)
          <span class="tooltip">Develop innovative products to increase revenue.</span>
        </button> 
        <button onclick="launchCrowdfunding()">
          Launch Crowdfunding Campaign ($1500)
          <span class="tooltip">Gain additional capital and boost revenue.</span>
        </button>
      `;
    } else if (niche === "fashion") {
      optionsArea.innerHTML += `
        <button onclick="hostFashionShow()">
          Host a Fashion Show ($2500)
          <span class="tooltip">Significantly increase brand visibility.</span>
        </button>
        <button onclick="collaborateInfluencer()">
          Collaborate with Influencer ($1200)
          <span class="tooltip">Attract new customers through influencer marketing.</span>
        </button>
      `;
    } else if (niche === "food") {
      optionsArea.innerHTML += `
        <button onclick="sourceLocalProduce()">
          Source Local Produce ($700)
          <span class="tooltip">Improve satisfaction by supporting local producers.</span>
        </button>
        <button onclick="startDeliveryService()">
          Start a Delivery Service ($1800)
          <span class="tooltip">Expand market reach and increase revenue.</span>
        </button>
      `;
    }

    optionsArea.innerHTML += `<p><strong>Capital:</strong> $${capital}</p>`;
  }

  function hireStaff() {
    if (capital >= 500) {
      customerSatisfaction += 7;
      capital -= 500;
      updateResults("Hired new staff! Customer satisfaction increased.");
    } else {
      alert("Not enough capital to hire staff!");
    }
  }

  function upgradeEquipment() {
    if (capital >= 1000) {
      revenue += 400;
      capital -= 1000;
      updateResults("Upgraded equipment! Production efficiency improved.");
    } else {
      alert("Not enough capital to upgrade equipment!");
    }
  }

  function runAdvertising() {
    if (capital >= 800) {
      revenue += 700;
      customerSatisfaction -= 3;
      capital -= 800;
      updateResults("Ran an advertising campaign! Revenue increased, but watch customer satisfaction.");
    } else {
      alert("Not enough capital to run advertising!");
    }
  }

  function researchMarket() {
    if (capital >= 300) {
      capital -= 300;
      let insights = "";

      if (niche === "tech") {
        insights = "Tech Insight: AI integration is the next big thing.";
      } else if (niche === "fashion") {
        insights = "Fashion Insight: Sustainable packaging is trending.";
      } else if (niche === "food") {
        insights = "Food Insight: Organic snacks are gaining popularity.";
      }

      updateResults("Researched market trends! " + insights);
    } else {
      alert("Not enough capital to research market trends!");
    }
  }

  // Tech niche
  function investInResearch() {
    if (capital >= 2000) {
      revenue += 900;
      capital -= 2000;
      updateResults("Invested in R&D! Developed innovative products, revenue increased.");
    } else {
      alert("Not enough capital to invest in R&D!");
    }
  }

  function launchCrowdfunding() {
    if (capital >= 1500) {
      revenue += 600;
      capital += 3500;
      capital -= 1500;
      updateResults("Launched crowdfunding campaign! Gained additional capital and increased revenue.");
    } else {
      alert("Not enough capital to launch crowdfunding!");
    }
  }

  // Fashion niche
  function hostFashionShow() {
    if (capital >= 2500) {
      revenue += 1100;
      customerSatisfaction += 12;
      capital -= 2500;
      updateResults("Hosted a fashion show! Brand visibility increased significantly.");
    } else {
      alert("Not enough capital to host a fashion show!");
    }
  }

  function collaborateInfluencer() {
    if (capital >= 1200) {
      revenue += 800;
      customerSatisfaction += 6;
      capital -= 1200;
      updateResults("Collaborated with an influencer! Attracted new customers.");
    } else {
      alert("Not enough capital to collaborate with an influencer!");
    }
  }

  // Food niche
  function sourceLocalProduce() {
    if (capital >= 700) {
      customerSatisfaction += 10;
      capital -= 700;
      updateResults("Sourced local produce! Customers appreciate your commitment to the community.");
    } else {
      alert("Not enough capital to source local produce!");
    }
  }

  function startDeliveryService() {
    if (capital >= 1800) {
      revenue += 1000;
      customerSatisfaction += 7;
      capital -= 1800;
      updateResults("Started a delivery service! Expanded your market reach.");
    } else {
      alert("Not enough capital to start a delivery service!");
    }
  }

  function updateResults(message) {
    const resultsArea = document.getElementById('results-area');
    resultsArea.style.display = 'block';
    resultsArea.querySelector('#result-message').innerText = message;
    updateProgressBars();
    showOptions();
    simulateMarket();
    checkGameOver();
  }

  function updateProgressBars() {
    const revenueBar = document.getElementById('revenue-bar');
    const satisfactionBar = document.getElementById('satisfaction-bar');

    let revenuePercent = Math.min((revenue / 10000) * 100, 100);
    let satisfactionPercent = Math.min(customerSatisfaction, 100);

    revenueBar.style.width = revenuePercent + '%';
    revenueBar.innerText = '$' + revenue;

    satisfactionBar.style.width = satisfactionPercent + '%';
    satisfactionBar.innerText = customerSatisfaction + '%';
  }

  function simulateMarket() {
    let marketChange = Math.floor((Math.random() * 201) - 100) * marketVolatility;
    revenue += marketChange;

    // Competitor Actions with Strategies
    let competitorAction = Math.random();
    let newsArea = document.getElementById('news-area');
    newsArea.innerHTML = ""; // Clear previous news

    if (competitorAction < 0.2) { // 20% chance of competitor action
      if (competitorRevenue > revenue * 0.8) { // Competitor is doing well
        competitorRevenue += Math.floor((Math.random() * 201) - 100) * competitorAggression * 1.2;
        newsArea.innerHTML += "<br><strong>Competitor News:</strong> Competitor launched a new product!";
        revenue -= 200; // Impact on player's revenue
      } else { // Competitor is struggling
        competitorRevenue += Math.floor((Math.random() * 151) - 75) * competitorAggression * 0.8;
        newsArea.innerHTML += "<br><strong>Competitor News:</strong> Competitor is struggling to keep up.";
      }
    }

    let newsEvent = Math.random();

    let nichePositiveEvents = {
      'tech': "Breakthrough in tech industry boosts your sales!",
      'fashion': "Fashion week drives more customers to your brand!",
      'food': "Health trends increase demand for organic food!"
    };

    let nicheNegativeEvents = {
      'tech': "Tech regulations slow down industry growth.",
      'fashion': "Sustainability issues cause public concern.",
      'food': "Supply chain disruptions affect organic produce."
    };

    if (newsEvent < 0.15) {
      newsArea.innerHTML += "<br><strong>Positive News:</strong> " + nichePositiveEvents[niche];
      revenue += 400;
    } else if (newsEvent < 0.3) {
      newsArea.innerHTML += "<br><strong>Negative News:</strong> " + nicheNegativeEvents[niche];
      revenue -= 400;
    } else {
      newsArea.innerHTML += "<br><strong>Market News:</strong> Steady market conditions.";
    }
  }

  function checkGameOver() {
    if (revenue <= 0 || customerSatisfaction <= 0) {
      alert("Game Over! Your business has failed.");
      resetGame();
    } else if (revenue >= 10000) {
      alert("Congratulations! You've built a successful business!");
      resetGame();
    }
  }

  function resetGame() {
    revenue = 1000;
    customerSatisfaction = 75;
    capital = 5000;
    niche = "";
    competitorRevenue = 800;
    tutorialMode = false;

    document.getElementById('difficulty-selection').style.display = 'block';
    document.getElementById('niche-selection').style.display = 'none';
    document.getElementById('business-visual').style.display = 'none';
    document.getElementById('options-area').style.display = 'none';
    document.getElementById('results-area').style.display = 'none';
    document.getElementById('news-area').style.display = 'none';
  }
</script>

</body>
</html>
